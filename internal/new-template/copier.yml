_min_copier_version: "9.0"
_subdirectory: .

# Questions
template_name:
  type: str
  help: Human-friendly name for the new template (e.g. Payments Service)

template_slug:
  type: str
  help: Base name used to derive final directory slug (will be sanitized)
  default: "{{ template_name }}"

# Derived (sanitized) slug used for directory creation
final_slug: "{{ template_slug|lower|replace(' ', '-')|replace('_','-')|replace('/', '-')|replace('.', '')|replace('--','-')|replace('--','-') }}"

_message_after_copy: |
  New template scaffold created at templates/{{ final_slug }} (from input '{{ template_slug }}')
  You can now add project-specific files under that directory. Shared chatmodes were copied.

_tasks:
  # Create target directories (mkdir -p behavior)
  - "mkdir -p templates/{{ final_slug }}/.github/chatmodes"
  - "mkdir -p templates/{{ final_slug }}/.github/instructions"
  - "mkdir -p templates/{{ final_slug }}/.github/prompts"
  - "mkdir -p templates/{{ final_slug }}/.vscode/mcp"
  # Seed with current shared chatmodes only (other shared assets come from root copier.yml during end-user generation)
  - "cp common/.github/chatmodes/*.chatmode.md templates/{{ final_slug }}/.github/chatmodes/"
  - "echo 'Scaffold complete.'"
